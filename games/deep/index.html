<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Deep ‚Äî Descent into Calm | PNEUOMA</title>
    <meta name="description" content="Dive into an endless ocean where your breath controls buoyancy. The deeper you go, the calmer you become.">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="game-container" id="gameContainer">
        <!-- Navigation -->
        <nav class="game-nav">
            <a href="../../index.html" class="back-link">‚Üê Back to PNEUOMA</a>
            <div class="depth-display">
                <span class="depth-value" id="depthValue">0</span>
                <span class="depth-unit">m</span>
            </div>
        </nav>

        <!-- Title Screen -->
        <section class="screen title-screen active" id="titleScreen">
            <div class="title-content">
                <div class="title-visual">
                    <div class="surface-light"></div>
                    <div class="diver-silhouette">
                        <svg viewBox="0 0 60 100">
                            <ellipse cx="30" cy="20" rx="12" ry="15" fill="currentColor"/>
                            <rect x="20" y="35" width="20" height="35" rx="5" fill="currentColor"/>
                            <rect x="12" y="40" width="8" height="25" rx="3" fill="currentColor"/>
                            <rect x="40" y="40" width="8" height="25" rx="3" fill="currentColor"/>
                            <rect x="18" y="70" width="10" height="25" rx="3" fill="currentColor"/>
                            <rect x="32" y="70" width="10" height="25" rx="3" fill="currentColor"/>
                        </svg>
                    </div>
                    <div class="bubbles-preview">
                        <div class="bubble"></div>
                        <div class="bubble"></div>
                        <div class="bubble"></div>
                    </div>
                </div>
                
                <h1 class="game-title">The Deep</h1>
                <p class="game-tagline">Descent into calm</p>
                
                <div class="title-description">
                    <p>Your breath controls everything.</p>
                    <p>Breathe in to rise. Breathe out to sink.</p>
                    <p>Find what lies at the bottom.</p>
                </div>

                <button class="btn-primary" id="startBtn">
                    <span>Begin Descent</span>
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 5v14M5 12l7 7 7-7"/>
                    </svg>
                </button>

                <div class="title-footer">
                    <span class="badge">Ages 10+</span>
                    <span class="badge">10-20 min</span>
                    <span class="badge">Breath</span>
                </div>
            </div>
        </section>

        <!-- Calibration Screen -->
        <section class="screen calibration-screen" id="calibrationScreen">
            <div class="calibration-content">
                <div class="mic-permission" id="micPermission">
                    <div class="mic-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"/>
                            <path d="M19 10v2a7 7 0 0 1-14 0v-2"/>
                            <line x1="12" y1="19" x2="12" y2="23"/>
                            <line x1="8" y1="23" x2="16" y2="23"/>
                        </svg>
                    </div>
                    <h2>Enable Microphone</h2>
                    <p>The Deep uses your microphone to detect breathing.</p>
                    <button class="btn-primary" id="enableMicBtn">Allow Microphone</button>
                </div>

                <div class="calibration-breathing hidden" id="calibrationBreathing">
                    <h2>Let's calibrate your breath</h2>
                    <p class="calibration-instruction" id="calibInstruction">Take a deep breath in...</p>
                    
                    <div class="breath-visualizer">
                        <div class="breath-level" id="breathLevel"></div>
                    </div>
                    
                    <div class="calibration-progress">
                        <div class="calib-step active" data-step="1">Inhale</div>
                        <div class="calib-step" data-step="2">Exhale</div>
                        <div class="calib-step" data-step="3">Ready</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Game Screen -->
        <section class="screen game-screen" id="gameScreen">
            <canvas id="oceanCanvas"></canvas>
            
            <!-- Breath Indicator -->
            <div class="breath-indicator" id="breathIndicator">
                <div class="breath-arrow up" id="breathUp">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 4l-8 8h5v8h6v-8h5z"/>
                    </svg>
                </div>
                <div class="breath-circle" id="breathCircle"></div>
                <div class="breath-arrow down" id="breathDown">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 20l8-8h-5v-8h-6v8h-5z"/>
                    </svg>
                </div>
            </div>

            <!-- Zone Label -->
            <div class="zone-label" id="zoneLabel">
                <span class="zone-name">Surface</span>
                <span class="zone-range">0-100m</span>
            </div>

            <!-- Discovery Popup -->
            <div class="discovery-popup hidden" id="discoveryPopup">
                <div class="discovery-content">
                    <div class="discovery-icon" id="discoveryIcon">üê†</div>
                    <h3 class="discovery-name" id="discoveryName">Moon Jellyfish</h3>
                    <p class="discovery-desc" id="discoveryDesc">Graceful drifters of the twilight zone</p>
                </div>
            </div>

            <!-- Discoveries Counter -->
            <div class="discoveries-counter" id="discoveriesCounter">
                <span class="disc-icon">‚ú¶</span>
                <span class="disc-count" id="discCount">0</span>
                <span class="disc-total">/ 12</span>
            </div>
        </section>

        <!-- Complete Screen -->
        <section class="screen complete-screen" id="completeScreen">
            <div class="complete-content">
                <div class="complete-visual">
                    <div class="abyss-glow"></div>
                    <div class="ancient-creature">
                        <svg viewBox="0 0 200 100">
                            <ellipse cx="100" cy="50" rx="80" ry="35" fill="none" stroke="currentColor" stroke-width="2" opacity="0.5"/>
                            <circle cx="60" cy="45" r="8" fill="currentColor" class="eye"/>
                            <circle cx="140" cy="45" r="8" fill="currentColor" class="eye"/>
                            <path d="M70 60 Q100 75 130 60" stroke="currentColor" stroke-width="2" fill="none"/>
                        </svg>
                    </div>
                </div>

                <h2 class="complete-title">You found the bottom</h2>
                <p class="complete-depth">Maximum depth: <span id="maxDepth">0</span>m</p>

                <div class="session-stats">
                    <div class="stat">
                        <span class="stat-value" id="statTime">0:00</span>
                        <span class="stat-label">Time</span>
                    </div>
                    <div class="stat">
                        <span class="stat-value" id="statDiscoveries">0</span>
                        <span class="stat-label">Discoveries</span>
                    </div>
                    <div class="stat">
                        <span class="stat-value" id="statBreaths">0</span>
                        <span class="stat-label">Breaths</span>
                    </div>
                </div>

                <div class="discoveries-grid" id="discoveriesGrid">
                    <!-- Populated by JS -->
                </div>

                <div class="complete-message">
                    <p>In stillness, we find depth.</p>
                    <p>In depth, we find peace.</p>
                </div>

                <div class="complete-actions">
                    <button class="btn-secondary" id="diveAgainBtn">Dive Again</button>
                    <a href="../../platform/games/index.html" class="btn-primary">More Games</a>
                </div>
            </div>
        </section>
    </div>

    <!-- Scripts -->
    <script src="src/js/utils.js"></script>
    <script src="src/js/audio.js"></script>
    <script src="src/js/creatures.js"></script>
    <script src="src/js/ocean.js"></script>
    <script src="src/js/main.js"></script>
</body>
</html>

